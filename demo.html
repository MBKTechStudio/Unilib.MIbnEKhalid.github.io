<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo</title>
    <link rel="stylesheet" href="Assets/unilib.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" />
</head>
<body>
    <section>
        <div class="Container">
            <br><br>
            <div class="not"></div>
            <div class="title"><span>Uni Course Materials</span></div>
            <div class="select-dropdown">
                <select id="categoryFilter" name="topics">
                    <option value="all">All</option>
                    <option value="CourseBooks">Course Books</option>
                    <option value="LabManuals">Lab Manuals</option>
                    <option value="CompletedAssigments">Completed Assigments</option>
                    <option value="other">Other</option>
                </select>
            </div>
            <div class="search-bar">
                <input type="text" id="searchProduct" placeholder="Search Book Name...">
                <div class="submit"><button type="submit"><i class="fas fa-search"></i></button></div>
                <button type="button" id="clearSearch" class="clear-btn"><i class="fas fa-times"></i></button>
            </div>
            <div class="products">
                <!-- Products will be dynamically inserted here -->
            </div>
            <div class="button field is-grouped" style="display: flex; justify-content: center;">
                <div class="control"><button class="button is-primary" onclick="openSupport()" id="submit-button">Request To Add Book</button></div>
            </div>
            <h1 style="text-align: center;" id="assignments">Assignments & Quiz</h1>
            <div id="detailsContainer" class="details-container">
                <!-- Assigments And Quiz will be dynamically inserted here -->
            </div>
            <div class="button field is-grouped" style="display: flex; flex-direction: column; align-items: center;">
                <a class="links" style="font-weight: bold;" href="history/demoh.html" target="_blank">See Assignments & Quizes History</a>
                <div class="control">
                    <button class="button is-primary" id="toggleButton">Show More</button>
                </div>
            </div>
        </div> 
    </section> 
    <script src="Assets/unilib.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
             const categoryFilter = document.getElementById('categoryFilter');
            // Always trigger filtering based on the current dropdown value
            filterProducts();
            const searchInput = document.getElementById('searchProduct');
            const clearBtn = document.getElementById('clearSearch');
            // Show clear button when there is input
            searchInput.addEventListener('input', function () {
                if (this.value.length > 0) {
                    clearBtn.style.display = 'block';
                } else {
                    clearBtn.style.display = 'none';
                }
            });
            // Clear input when clear button is clicked
            clearBtn.addEventListener('click', function () {
                searchInput.value = '';
                clearBtn.style.display = 'none';
                filterProducts(); // Optionally trigger the filter function to show all products again
            });
        }); 
        // JavaScript to handle collapse/expand functionality
        const detailsContainer = document.getElementById('detailsContainer');
        const toggleButton = document.getElementById('toggleButton');
        toggleButton.addEventListener('click', function () {
            // Toggle the expanded class
            detailsContainer.classList.toggle('expanded');

            // Update the button text based on the state
            if (detailsContainer.classList.contains('expanded')) {
                toggleButton.textContent = 'Show Less';
            } else {
                toggleButton.textContent = 'Show More';
            }
        });
    </script>
</body>
</html>